/*
 jQuery FCompare Plugin  2.0.108 
 Copyright 2013 Miriam Zusin. All rights reserved.
 To use this file you must to buy a licence at http://codecanyon.net/user/no81no/portfolio 
*/
(function(e){var h=function(g,f){var b={options:g,scene:null,cookies:null,data:null,$root:f};b.options=e.extend({max:2,itemsFeaturesUrl:"",dataUrl:"",sliderTmplPath:".slider_template",featureTmplPath:".feature_template",dataTmplPath:".data_template",featuresPath:"#content .features",dataPath:"#content .items",hideIdenticalPath:".show-diff-btn",cookies:!0,expiration:-1,slidesNumber:4,keyboard:!1,callback:function(){},onCompareEvent:"onCompareEvent",closeEvent:"closeEvent"},g);b.cookies=new jQuery.fn.fcompare.cookies(b.options,
b.$root);b.data=new jQuery.fn.fcompare.data(b.options,b.$root,function(){b.scene=new jQuery.fn.fcompare.scene(b.options,b.$root,b.data,b.cookies);b.options.cookies&&b.scene.restoreFromCookies()});return e.extend(this,b)};jQuery.fn.fcompare=function(g){return this.each(function(){var f=new h(g,e(this));e(this).data("fcompare",f)})}})(jQuery);(function(e){var h=function(a,c){if(!(a.$content.find('input[type="checkbox"]:checked').length>=a.options.max)||c.get(0).checked)c.get(0).checked=!c.get(0).checked,c.trigger("change")},g=function(a){a.$checkboxes.change(function(){a.$root.trigger(a.options.onCompareEvent,[e(this),this.checked])});a.$root.on(a.options.closeEvent,function(c,b){var e=a.$content.find('input[data-id="'+b+'"]');h(a,e)});a.$compareLinks.click(function(b){b.preventDefault();b=e(this).prev('input[type="checkbox"]');h(a,b);
return!1});a.$prevArrow.click(function(){0<a.currentSlide&&(a.currentSlide--,f(a))});a.$nextArrow.click(function(){a.currentSlide<a.slides.length-1&&(a.currentSlide++,f(a))});a.options.keyboard&&e("body").keydown(function(b){switch(b.keyCode){case a.keys.LEFT:a.$prevArrow.trigger("click");break;case a.keys.RIGHT:a.$nextArrow.trigger("click")}})},f=function(a){var b,d;a.$liList.hide(0);b=a.slides[a.currentSlide];for(var f=0;f<b.length;f++)d=e(b[f]),f===b.length-1?d.addClass("content-li-last"):d.removeClass("content-li-last"),
d.show(0);0===a.currentSlide?(a.$prevArrow.removeClass("prev-active"),a.$nextArrow.addClass("next-active")):a.currentSlide===a.slides.length-1?(a.$prevArrow.addClass("prev-active"),a.$nextArrow.removeClass("next-active")):(a.$prevArrow.addClass("prev-active"),a.$nextArrow.addClass("next-active"));e.isFunction(a.slideCallback)&&a.slideCallback(a.currentSlide)},b=function(a,b,d){a={options:a,$root:b,contentHtml:d,slideCallback:null,$compareLinks:null,$checkboxes:null,$liList:null,$content:null,$prevArrow:null,
$nextArrow:null,slides:[],currentSlide:0,keys:{LEFT:37,RIGHT:39}};a.$prevArrow=a.$root.find(".prev");a.$nextArrow=a.$root.find(".next");a.$content=a.$root.find(".content");a.$content.html(d);a.$liList=a.$content.children("li").hide();a.$compareLinks=a.$content.find("a.compare");a.$checkboxes=a.$content.find(".cb input");b=0;for(var k;b<a.$liList.length&&!(d=b,b+=Number(a.options.slidesNumber),k=a.$liList.slice(d,b),a.slides.push(k),b=d+k.length,0>=k.length););a.$liList.length>a.options.slidesNumber&&
(a.$prevArrow.css("visibility","visible"),a.$nextArrow.css("visibility","visible"));f(a);a.$content.show(0);return e.extend(this,a)};b.prototype.jump=function(a){0<=a&&a<this.slides.length&&(this.currentSlide=a,f(this))};jQuery.fn.fcompare.jslider=function(a,c,d){a=new b(a,c,d);g(a);return a}})(jQuery);(function(e){var h=function(b,a,c){c=escape(c);var d=new Date;-1===b.options.expiration?document.cookie=a+"="+c+";path=/;":(b=parseInt(b.options.expiration,10),d.setDate(d.getDate()+b),document.cookie=a+"="+c+";path=/; expires="+d.toUTCString())},g=function(b){var a,c,d;d=document.cookie.split(";");for(var e=0;e<d.length;e++)if(a=d[e].substr(0,d[e].indexOf("=")),c=d[e].substr(d[e].indexOf("=")+1),a=a.replace(/^\s+|\s+$/g,""),a===b)return unescape(c);return""},f=function(b,a){return e.extend(this,
{options:b,$root:a,COOKIE_NAME:"fcompare"})};f.prototype.setCookie=function(b,a){h(this,b,a)};f.prototype.getCookie=function(b){return g(b)};f.prototype.setCookies=function(b){for(var a="",c,d=0;d<b.length;d++)c=b[d],0!==d&&(a+=","),a+=c.id;h(this,this.COOKIE_NAME,a)};f.prototype.getCookies=function(){return g(this.COOKIE_NAME)};jQuery.fn.fcompare.cookies=function(b,a){return new f(b,a)}})(jQuery);(function(e){var h=function(b){e.ajax({url:b.options.itemsFeaturesUrl,dataType:"json",type:"GET",contentType:"application/json",success:function(a){var c;if(a.items)for(var d=0;d<a.items.length;d++)c={},c=e.extend({},a.items[d],!0),c.selected=!1,c.values=[],b.items.push(c);if(a.features)for(d=0;d<a.features.length;d++)c={},c=e.extend({},a.features[d],!0),b.features.push(c);e.isFunction(b.callback)&&b.callback()}})},g=function(b,a,c){var d={dataType:"json",type:"GET",contentType:"application/json",
success:function(a){e.isFunction(c)&&c(a)}};e.isFunction(b.options.dataUrl)&&(d.url=b.options.dataUrl(a),e.ajax(d))},f=function(b,a,c){b={options:b,$root:a,callback:c,items:[],features:[]};h(b);return e.extend(this,b)};f.prototype.turnOffItem=function(b){b=jQuery.fn.fcompare.helper.indexOf(this.items,b,"id");-1!==b&&(this.items[b].values=[],this.items[b].selected=!1)};f.prototype.turnOn=function(b,a){var c;c=jQuery.fn.fcompare.helper.indexOf(this.items,b,"id");-1!=c&&(this.items[c].values=a,this.items[c].selected=
!0)};f.prototype.loadData=function(b,a){g(this,b,a)};f.prototype.countSelectedItems=function(){for(var b=0,a=0;a<this.items.length;a++)this.items[a].selected&&b++;return b};f.prototype.getSelectedItems=function(){for(var b=[],a,c=0;c<this.items.length;c++)a=this.items[c],a.selected&&b.push(a);return b};f.prototype.removeCommonFeatures=function(b,a){for(var c,d,e,m,f,n,l,g=[],h=0;h<a.length;h++){c=a[h];n=!1;for(l=1;l<b.length;l++)e=b[l-1],d=b[l],m=jQuery.fn.fcompare.helper.indexOf(e.values,c.id,"feature_id"),
f=jQuery.fn.fcompare.helper.indexOf(d.values,c.id,"feature_id"),e=-1!==m?e.values[m].val:void 0,d=-1!==f?d.values[f].val:void 0,e!==d&&(n=!0);l=-1==jQuery.fn.fcompare.helper.indexOf(g,c.id,"id");n&&l&&g.push(c)}return g};jQuery.fn.fcompare.data=function(b,a,c){return new f(b,a,c)}})(jQuery);(function(e){jQuery.fn.fcompare.helper={};jQuery.fn.fcompare.helper.indexOf=function(e,g,f){for(var b=-1,a,c=0;c<e.length;c++)a=e[c],a[f]===g&&(b=c);return b}})(jQuery);(function(e){var h=function(a){a.$root.on(a.options.onCompareEvent,function(b,c,e){d(a,c,e)})},g=function(a){a.slider.$content.find('input[type="checkbox"]:checked').length==a.options.max?a.slider.$content.find('input[type="checkbox"]:not(:checked)').attr("disabled","disabled"):a.slider.$content.find('input[type="checkbox"]:not(:checked)').removeAttr("disabled")},f=function(a){a.showOnlyDiff?(a.$showDiffBtnPartial.addClass("fcompare-hidden"),a.$showDiffBtnAll.removeClass("fcompare-hidden")):(a.$showDiffBtnPartial.removeClass("fcompare-hidden"),
a.$showDiffBtnAll.addClass("fcompare-hidden"))},b=function(a){a.$showDiffBtn=a.$root.find(a.options.hideIdenticalPath);a.$showDiffBtnPartial=a.$showDiffBtn.find(".partial");a.$showDiffBtnAll=a.$showDiffBtn.find(".all");f(a);a.$showDiffBtn.click(function(){a.showOnlyDiff=!a.showOnlyDiff;f(a);c(a)})},a=function(a,b,c){for(var d,f,g=[],h,k=0;k<b.length;k++){d=b[k];h=[];for(var p=0;p<c.length;p++)f=c[p],f=jQuery.fn.fcompare.helper.indexOf(d.values,f.id,"feature_id"),f=-1!==f?{val:d.values[f].val}:{val:""},
h.push(f);g.push({item:d,row:h})}a.$dataBox.html(e.render.dataTmpl(g));a.$closeLiList=a.$dataBox.find("li.close");a.$closeLiList.click(function(){var b=e(this).attr("data-id");a.$root.trigger(a.options.closeEvent,[b])})},c=function(c){var d,f;d=c.data.getSelectedItems();c.selectedItems=d;f=c.showOnlyDiff&&1<c.selectedItems.length?c.data.removeCommonFeatures(d,c.data.features):c.data.features;0<d.length?c.$featuresBox.html(e.render.featureTmpl({features:f})):c.$featuresBox.html("");a(c,d,f);b(c);c.options.cookies&&
c.cookies.setCookies(d);e.isFunction(c.options.callback)&&c.options.callback(d.length)},d=function(a,b,d){var e,f;e=b.attr("data-id");d?(f=b.parents(".cb").find(".ajax-loader"),f.removeClass("nonvisible"),a.data.loadData(e,function(b){a.data.turnOn(e,b.values);c(a);f.addClass("nonvisible")})):(a.data.turnOffItem(e),c(a));g(a)},k=function(a,b,c,d){a={options:a,$root:b,data:c,cookies:d,slider:null,$sliderTmpl:null,$featureTmpl:null,$dataTmpl:null,$featuresBox:null,$dataBox:null,$closeLiList:null,selectedItems:null,
showOnlyDiff:!1,$showDiffBtn:null,$showDiffBtnPartial:null,$showDiffBtnAll:null};a.$sliderTmpl=a.$root.find(a.options.sliderTmplPath);a.$featureTmpl=a.$root.find(a.options.featureTmplPath);a.$dataTmpl=a.$root.find(a.options.dataTmplPath);a.$featuresBox=a.$root.find(a.options.featuresPath);a.$dataBox=a.$root.find(a.options.dataPath);e.templates({sliderTmpl:a.$sliderTmpl.get(0),featureTmpl:a.$featureTmpl.get(0),dataTmpl:a.$dataTmpl.get(0)});b=e.render.sliderTmpl(a.data.items);a.slider=new jQuery.fn.fcompare.jslider(a.options,
a.$root,b);return e.extend(this,a)};k.prototype.restoreFromCookies=function(){var a,b;if(a=this.cookies.getCookies()){a=a.split(",");for(var c=0;c<a.length;c++)b=a[c],this.$root.trigger(this.options.closeEvent,[b])}};jQuery.fn.fcompare.scene=function(a,b,c,d){a=new k(a,b,c,d);h(a);return a}})(jQuery);
